{% extends 'base.html' %}

{% block title %}My Wishlist{% endblock %}

{% block content %}
<h2>Wishlist</h2>

<!-- Display wishlist items -->
{% if wishlist_items %}
    <ul>
        {% for item in wishlist_items %}
        <li>
            <img src="{{ item.image_url }}" alt="{{ item.name }}" width="50">
            <strong>{{ item.name }}</strong> - ${{ item.price }} x {{ item.quantity }}
            = ${{ item.total_price }}
            
            <!-- Move to cart button -->
            <form method="post" action="{% url 'move_to_cart' item.product_id %}" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-success btn-sm">Move to Cart</button>
            </form>

            <!-- Remove from wishlist button -->
            <form method="post" action="{% url 'remove_from_wishlist' item.product_id %}" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger btn-sm">Remove</button>
            </form>
        </li>
        {% endfor %}
    </ul>

    <!-- Move All to Cart button -->
    <form method="post" action="{% url 'move_all_to_cart' %}">
        {% csrf_token %}
        <button type="submit" class="btn btn-primary mt-3">Move All to Cart</button>
    </form>

{% else %}
    <p>Your wishlist is empty.</p>
{% endif %}
{% endblock %}
